{% extends "repo_master.html" %}

{% block title %}Pull requests - {{ repo.name }}{% endblock %}
{%block tag %}home{% endblock %}


{% block repo %}

<div class="inline">
  <h2>
  Pull-requests
  </h2>
  {% if status and status not in [False, 'Closed'] %}
    <a href="{{ url_for('request_pulls', username=username,
               repo=repo.name) }}?status=Closed">
      (Closed)</a>
  {% else %}
    <a href="{{ url_for('request_pulls', username=username,
                 repo=repo.name) }}">
      (Open)</a>
  {% endif %}
</div>

<section class="requests_list">
  {% if requests %}
  <ul>
    {% for request in requests %}
    <li>
      #{{ request[1] }}
      <a href="{{ url_for('request_pull', username=username,
                repo=repo.name, requestid=request[1]) }}">
        {{ request[0].title }}
      </a>
      <span> Opened by
      <a href="{{ url_for('view_user', username=request[0].user.user) }}">
      {{request[0].user.user}}
      </a> on {{ request[0].date_created.strftime('%Y-%m-%d %H:%M') }}</span>
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p>
    No pull-request have been opened for this project.
  </p>
  {% endif %}
</section>

{% endblock %}
